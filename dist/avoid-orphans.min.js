!function(a){"undefined"!=typeof module?module.exports=a():"function"==typeof define&&"object"==typeof define.amd&&define(a),"undefined"!=typeof jQuery&&a().installPlugin()}(function(){function a(a,b){this.element=this.$element=this.options=null,this.init(a,b)}function b(b){return this.each(function(){var c,d,e;c=$(this),d="plugin-avoid-orphans",e=c.data(d),e||c.data(d,e=new a(this,b))})}return a.VERSION="0.1.0",a.DEFAULTS={_nbsp:"&nbsp;",_nbHyphen:"&#8209;",wordCountThreshold:2},a.prototype={init:function(a,b){var c=this;this.element=a,this.$element=$(a),this.options=this.getOptions(b),this.$element.each(function(){c.doElement($(this))})},getDefaults:function(){return a.DEFAULTS},getOptions:function(a){return a=$.extend({},this.getDefaults(),this.$element.data(),a)},setOptions:function(a){this.options=$.extend({},this.options,a)},getNewNodeContent:function(a){var b,c;return c=a.split(" "),b=c.pop(),b.indexOf("-")>0?(b=b.replace("-",this.options._nbHyphen),c.length?c.join(" ")+" "+b:b):""===b?c.join(" ")+this.options._nbsp:c.join(" ")+this.options._nbsp+b},doElement:function(a){var b,c,d,e;if(a.text().split(" ").length<=this.options.wordCountThreshold)return!1;if(b=a.contents(),1===b.length)a.html(this.getNewNodeContent($.trim(a.text())));else for(var f=b.length-1;f>=0;f--)if(c=$(b[f]),d=c.text(),d.indexOf(" ")>=0||d.indexOf("-")>=0&&(1===b[f].nodeType||3===b[f].nodeType)){e=this.getNewNodeContent(d),1===b[f].nodeType?c.html(e):c.replaceWith(e);break}}},a.isPluginInstalled=!1,a.installPlugin=function(){if(!a.isPluginInstalled){var c=$.fn.avoidOrphans;$.fn.avoidOrphans=b,$.fn.avoidOrphans.Constructor=a,$.fn.avoidOrphans.noConflict=function(){return $.fn.avoidOrphans=c,this},a.isPluginInstalled=!0}},a});